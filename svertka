#include <stdio.h>
#include <stdlib.h>
#include <locale.h>

int main()
{
    setlocale(LC_ALL, "rus");
    int n;
    printf("Введите n: ");
    scanf("%d", &n);
    
    int *array = (int*)malloc(n * sizeof(int));
    int c = 0;
    int *newArray = (int*)malloc(c * sizeof(int));

    for (int i = 0; i < n; i++) {
        int num = 0;
        while (num == 0) {
            printf("Введите число неравное нулю: ");
            scanf("%d", &num);
        }
        array[i] = num;
    }

    printf("\nИсходный массив: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", array[i]);
    }

    int k = 0;
    int j = 0;
    int temp = array[0];

    for (int i = 0; i < n; i++) {
        /*printf("\n%d %d %d", i, temp, array[i + 1]);*/

        if (temp + 1 == array[i + 1]) {
            temp = array[i + 1];
            if (k == 1) {
                newArray = (int*)realloc(newArray, ++c * sizeof(int));
                newArray[j] = 0;
                j++;
            }
            else if (k == 0) {
                newArray = (int*)realloc(newArray, ++c * sizeof(int));
                newArray[j] = array[i];
                j++;
            }
            if (k != 0) {
                array[i] = -1;
            }
            k++;
        }
        else if (temp == array[i + 1] + 1) {
            temp = array[i + 1];
            if (k == 1) {
                newArray = (int*)realloc(newArray, ++c * sizeof(int));
                newArray[j] = 0;
                j++;
            }
            else if (k == 0) {
                newArray = (int*)realloc(newArray, ++c * sizeof(int));
                newArray[j] = array[i];
                j++;
            }
            if (k != 0) {
                array[i] = -1;
            }
            k++;
        }
        else {
            temp = array[i + 1];
            k = 0;
            newArray = (int*)realloc(newArray, ++c * sizeof(int));
            newArray[j] = array[i];
            j++;
        }
    }

    printf("\nИзмененный массив: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", array[i]);
    }

    printf("\nИзмененный массив 2: ");
    for (int i = 0; i < j; i++) {
        printf("%d ", newArray[i]);
    }

    return 0;
}
